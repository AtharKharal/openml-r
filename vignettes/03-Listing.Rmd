---
title: "OpenML"
author: "The OpenML R Team"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{OpenML}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
```{r init, include=FALSE}
# library("knitr")
# opts_chunk$set(cache = TRUE)
library("OpenML")
setOMLConfig(apikey = "c1994bdb7ecb3c6f3c8f3b35f4b47f1f")
```


# Listing {#listing}
In this stage, we want to list basic information about the various OpenML objects:

* data sets
* tasks
* flows
* runs
* run results
* evaluation measures
* task types

See the [OpenML introduction](http://openml.org/guide) for a detailed overview on (and explanations of) the different objects.

For each of these objects we have a function to query the information beginning with `listOML`. All of these functions return a `data.frame`, even in case the result consists of a single column or have zero observations (i.e. rows).

One should be aware of the fact, that the `listOML*` functions only list information on the corresponding objects -- they do not download the respective objects. Information on actually [downloading](#download) specific objects is covered within the next section.

First, load the package:
```{r results="hide"}
library("OpenML")
setOMLConfig(verbosity = 0) # switch off status output
```

### List data sets
To browse the OpenML data base for appropriate data sets, you can use `listOMLDataSets()` in order to get basic data characteristics (number of features, instances, classes, missing values, etc.) for each data set.
By default, `listOMLDataSets()` returns only data sets that have an active status on OpenML.
If you need data sets that are either `"in_preparation"` or `"deactivated"`, you can change the `status` parameter accordingly:
```{r}
datasets = listOMLDataSets()  # returns active data sets
str(datasets)
head(datasets[, 1:5])

inactive.data = listOMLDataSets(status = "deactivated")  # returns deactivated data sets
head(inactive.data[, 1:5])
```

To find a specific data set, one can now query the resulting `datasets` object. Suppose we want
to find the `iris` data set.
```{r}
subset(datasets, name == "iris")
```

As one can see there are two data sets called `iris`. We want to use the original data set with three classes, which is stored under the data set ID (`did`) `r subset(datasets, name == "iris" & NumberOfClasses == 3)$did`.
One can also have a closer look at the data set on the OpenML web page http://openml.org/d/`r subset(datasets, name == "iris" & NumberOfClasses == 3)$did`.

### List tasks
Each OpenML task is a bundle that encapsulates information on various objects:

* the data set itself
* the target feature
* a (performance) estimation procedure,  e.g., a 10-fold cross-validation
* data splits for this estimation procedure
* one or more (performance) evaluation measures
* a specific type, e.g., `"Supervised Classification"` or `"Supervised Regression"`

Listing the tasks can be done via
```{r}
tasks = listOMLTasks()
str(tasks)
head(tasks[, 1:5])
```

For some data sets, there may be more than one task available on the OpenML server.
For example, you can look for `"Supervised Classification"` tasks that are available for a specific data set as follows:
```{r}
# subset tasks to "Supervised Classification" for the iris data (did == 61)
head(subset(tasks, task.type == "Supervised Classification" & did == 61L)[, 1:5])
```

### List flows
A flow is the definition and implementation of a specific algorithm workflow or script, i.e., a flow is essentially the code that implements the algorithm.
```{r}
flows = listOMLFlows()
str(flows)
flows[56:63, 1:4]
```

### List runs and run results
A run is an experiment, which is executed on a given combination of task, flow and setup. The corresponding results are stored as a run result.
Both objects, i.e., runs and run results, can be listed via `listOMLRuns` and `listOMLRunEvaluations`.
As each of those objects is defined with a task, setup and flow, one can extract runs and run results with specific combinations of `task.id`, `setup.id` and/or `flow.id`.
For instance, listing all runs for [task 59](http://www.openml.org/t/59) (supervised classification on iris) can be done with
```{r eval}
runs = listOMLRuns(task.id = 59L)  # must be restricted to a task, setup and/or implementation ID
head(runs)

runresults = listOMLRunEvaluations(task.id = 59)  # a task ID must be supplied
str(runresults)
```

### List evaluation measures and task types
Analogously to the previous listings, one can list further objects simply by calling the respective functions.
```{r eval = FALSE}
listOMLDataSetQualities()
listOMLEstimationProcedures()
listOMLEvaluationMeasures()
listOMLTaskTypes()
```
